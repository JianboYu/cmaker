AUX_SOURCE_DIRECTORY(./src omxil_src)
INCLUDE_DIRECTORIES(./inc ./src ../../os/inc ../../core/inc)
ADD_LIBRARY(libomxil STATIC ${omxil_src}) 
SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} ${CMAKE_PRJ_CXX_FLAGS} --std=c++11 -Wno-unused-function")
SET(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} ${CMAKE_PRJ_C_FLAGS}")
MESSAGE(INFO " libomxil CMAKE_CXX_FLAGS: ${CMAKE_CXX_FLAGS}")
MESSAGE(INFO " libomxil CMAKE_C_FLAGS: ${CMAKE_C_FLAGS}")
SET_TARGET_PROPERTIES(libomxil PROPERTIES OUTPUT_NAME "omxil")
TARGET_LINK_LIBRARIES(libomxil libos)
if (NOT ANDROID)
  SET(CMAKE_CXX_FLAGS "-fPIC ${CMAKE_CXX_FLAGS} -DOS_POSIX -DOS_LINUX")
elseif (ANDROID)
  SET(CMAKE_CXX_FLAGS "-llog ${CMAKE_CXX_FLAGS} -DOS_POSIX -DOS_LINUX")
elseif (WINDOWS)
endif ()

ADD_SUBDIRECTORY(utest)
